function setCookie(c,d,e){var a;if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+d+a+"; path=/"}function getCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null}function deleteCookie(a){setCookie(a,"",-1)}var hideAllPopovers=function(){if($(".popover").length>0){$(".popover").each(function(){$(this).popover("hide")})}};$(document).on("click","a.toggle-all",function(a){a.preventDefault();checked=$(this).parents(".column-switcher").find(":input:checked").length;all=$(this).parents(".column-switcher").find(":input").length;if(all!=checked){$(this).parents(".column-switcher").find(":input").prop("checked",true).trigger("change")}else{$(this).parents(".column-switcher").find(":input").prop("checked",false).trigger("change")}});$(document).on("click","#discount-special-window input.datepicker",function(){var a=$(this);if(a.length>0){if(typeof(a.data("dp"))==="undefined"){if(a.val()==""){var b=new Date();a.val(moment(b).format(a.data("date-format")))}a.datetimepicker({pickTime:false}).data("DateTimePicker").show();a.data("dp",1)}}});$(document).on("click","#discount-special-window input.datepicker",function(){var a=$(this);if(a.length>0){if(typeof(a.data("dp"))==="undefined"){if(a.val()==""){var b=new Date();a.val(moment(b).format(a.data("date-format")))}a.datetimepicker({pickTime:false}).data("DateTimePicker").show();a.data("dp",1)}}});$(document).on("click","#product-extra-wrapper tbody td input.datepicker",function(){var a=$(this);if(a.length>0){if(typeof(a.data("dp"))==="undefined"){a.datetimepicker({pickTime:false}).data("DateTimePicker").show();a.data("dp",1)}}});$.extend({getUrlVars:function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d},getUrlVar:function(a){return $.getUrlVars()[a]}});route=$.getUrlVar("route").match(/^catalog\/.?product$/g);if(route&&route.length==1){var l=window.location.toString();var newL=l.replace(/catalog\/.?product/g,"extension/product_extra");if(getCookie("remove-auto-redirect")!=1){window.location=newL}}if($.getUrlVar("iframed")==1){$("head").append('<link rel="stylesheet" href="view/stylesheet/ipe-iframed.css" type="text/css" />')}$(document).ready(function(b){b(document).on({focusin:function(){b(this).parents("td").addClass("editable")},focusout:function(){b(this).parents("td").removeClass("editable")}},"#product-extra-wrapper tbody td :input");b("#product-extra-wrapper .settings-button").popover({content:function(){return b(".settings-box").html()},placement:"bottom",html:true});b(document).on("click","#product-extra-wrapper tr.product-row td.categories",function(g){if(!b(g.target).hasClass("remove-category")){var f=b(this).find(".category-cell");if(typeof(b(f).data("popovered"))=="undefined"){if(typeof(b("body").data("categoryCell"))!="undefined"){b("body").data("categoryCell").popover("destroy");b("body").data("categoryCell").removeData("popovered");b("body").removeData("categoryCell")}b(f).popover({container:"body",html:true,content:function(){var h=b("tr.filter td.category-column select").clone();var i=b(f).children().get(0);b(h.children().get(0)).html("-- Select None --");b(h).on("change",function(){b.get(link,{type:"change_category",category_id:b(this).val().join(","),product_id:b(f).parents("tr").attr("data-id")},function(k){if(k=="done"){b(i).children().remove();b(h).find("option:selected").each(function(){if(b(this).val()!="*"){var m=b("#cat-node-template").html();var n=m.replace(/--p--/gi,b(f).parents("tr").attr("data-id")).replace(/--c--/gi,b(this).prop("value")).replace(/--cc--/gi,b(this).text());b(i).append(n)}})}})});var j=b(i).find("li").map(function(){return Number(b(this).attr("data-id"))}).get();b(h).prop("multiple",true).prop("size",15).find("option:selected").prop("selected",false);b.each(j,function(m,k){b(h).find('option[value="'+k+'"]').prop("selected",true)});return h}}).popover("show");b(f).data("popovered",true);b("body").data("categoryCell",b(f))}else{b("body").data("categoryCell").popover("destroy");b("body").data("categoryCell").removeData("popovered");b("body").removeData("categoryCell")}}});b(document).on("click","#product-extra-wrapper",function(f){if(!b(f.target).hasClass("category-column")&&b(f.target).parents(".category-column").length==0){if(b("body").data("categoryCell")){b("body").data("categoryCell").popover("destroy")}}});b(document).on("click","#product-extra-wrapper tr.product-row td.filters",function(g){if(!b(g.target).hasClass("remove-filter")){var f=b(this).find(".filter-cell");if(typeof(b(f).data("popovered"))=="undefined"){if(typeof(b("body").data("filterCell"))!="undefined"){b("body").data("filterCell").popover("destroy");b("body").data("filterCell").removeData("popovered");b("body").removeData("filterCell")}b(f).popover({container:"body",html:true,content:function(){var h=b("tr.filter td.filter-column select").clone();var i=b(f).children().get(0);b(h.children().get(0)).html("-- Select None --");b(h).on("change",function(){b.get(link,{type:"change_filter",filter_id:b(this).val().join(","),product_id:b(f).parents("tr").attr("data-id")},function(k){if(k=="done"){b(i).children().remove();b(h).find("option:selected").each(function(){if(b(this).val()!="*"){var n=b("#filter-node-template").html();var m=n.replace(/--p--/gi,b(f).parents("tr").attr("data-id")).replace(/--f--/gi,b(this).prop("value")).replace(/--ff--/gi,b(this).text());b(i).append(m)}})}})});var j=b(i).find("li").map(function(){return Number(b(this).attr("data-id"))}).get();b(h).prop("multiple",true).prop("size",15).find("option:selected").prop("selected",false);b.each(j,function(m,k){b(h).find('option[value="'+k+'"]').prop("selected",true)});return h}}).popover("show");b(f).data("popovered",true);b("body").data("filterCell",b(f))}else{b("body").data("filterCell").popover("destroy");b("body").data("filterCell").removeData("popovered");b("body").removeData("filterCell")}}});b(document).on("click","#product-extra-wrapper",function(f){if(!b(f.target).hasClass("filter-column")&&b(f.target).parents(".filter-column").length==0){if(b("body").data("filterCell")){b("body").data("filterCell").popover("destroy")}}});if(getCookie("remove-auto-redirect")==1){var d=b('#menu-catalog>ul>li>a[href*="catalog/product"]').clone();d.attr("href",d.attr("href").replace("route=catalog/product","route=extension/product_extra"));d.html("Instant Product Editor");var a=b("<li></li>").append(d);b("#menu-catalog>ul").append(a)}b(document).on("click","#product-extra-wrapper td.stores a",function(g){g.preventDefault();var f=b(this);b.get(b(this).attr("href"),function(){if(f.hasClass("included")){f.removeClass("included").addClass("excluded")}else{f.removeClass("excluded").addClass("included")}f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})});b(document).on("click","#product-extra-wrapper td.status a",function(g){g.preventDefault();var f=b(this);b.get(b(this).attr("href"),function(){if(f.hasClass("included")){f.removeClass("included").addClass("excluded");f.html(b("span.disabled").html())}else{f.removeClass("excluded").addClass("included");f.html(b("span.enabled").html())}f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})});b(document).on("click","#product-extra-wrapper td.subtract a",function(g){g.preventDefault();var f=b(this);b.get(b(this).attr("href"),function(){if(f.hasClass("included")){f.removeClass("included").addClass("excluded");f.html(b("span.no").html())}else{f.removeClass("excluded").addClass("included");f.html(b("span.yes").html())}f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})});b(document).on("click","#product-extra-wrapper td.shipping a",function(g){g.preventDefault();var f=b(this);b.get(b(this).attr("href"),function(){if(f.hasClass("included")){f.removeClass("included").addClass("excluded");f.html(b("span.no").html())}else{f.removeClass("excluded").addClass("included");f.html(b("span.yes").html())}f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.product-model input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&model="+encodeURIComponent(f.val()),function(g){f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("click","#product-extra-wrapper td.product-name",function(){var f=b(this).find(".product-name-wrapper");f.hide();f.next().show();f.next().focus()});b(document).on("focusout","#product-extra-wrapper td.product-name input",function(){var f=b(this);var g=f.parents("td");if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&name="+encodeURIComponent(f.val()),function(h){f.attr("orig",h);g.addClass("updated");f.prev().html(h);f.prev().show();f.hide();setTimeout(function(){g.removeClass("updated")},1500)})}});b(document).on("click","#product-extra-wrapper td.product-meta-title",function(){var f=b(this).find(".product-meta-title-wrapper");f.hide();f.next().show();f.next().focus()});b(document).on("focusout","#product-extra-wrapper td.product-meta-title input",function(){var f=b(this);var g=f.parents("td");if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&meta_title="+encodeURIComponent(f.val()),function(h){f.attr("orig",h);g.addClass("updated");f.prev().html(h);f.prev().show();f.hide();setTimeout(function(){g.removeClass("updated")},1500)})}});b(document).on("click","#product-extra-wrapper td.product-meta-keyword",function(){var f=b(this).find(".product-meta-keyword-wrapper");f.hide();f.next().show();f.next().focus()});b(document).on("focusout","#product-extra-wrapper td.product-meta-keyword input",function(){var f=b(this);var g=f.parents("td");if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&meta_keyword="+encodeURIComponent(f.val()),function(h){f.attr("orig",h);g.addClass("updated");f.prev().html(h);f.prev().show();f.hide();setTimeout(function(){g.removeClass("updated")},1500)})}});b(document).on("click","#product-extra-wrapper td.product-meta-description",function(){var f=b(this).find(".product-meta-description-wrapper");f.hide();f.next().show();f.next().focus()});b(document).on("focusout","#product-extra-wrapper td.product-meta-description input",function(){var f=b(this);var g=f.parents("td");if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&meta_description="+encodeURIComponent(f.val()),function(h){f.attr("orig",h);g.addClass("updated");f.prev().html(h);f.prev().show();f.hide();setTimeout(function(){g.removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.quantity input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&quantity="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.minimum input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&minimum="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.weight input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&weight="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.sku input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&sku="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.upc input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&upc="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.location input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&location="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.date_available input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&date_available="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.seo input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&seo="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.length input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&length="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.width input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&width="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.height input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&height="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("keyup","#product-extra-wrapper td.quantity input",function(){b(this).removeClass();if(b(this).val()<=0){b(this).addClass("red")}else{if(b(this).val()<=5){b(this).addClass("yellow")}else{b(this).addClass("green")}}});b(document).on("focusout","#product-extra-wrapper input.product-price-field",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&price="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("focusout","#product-extra-wrapper td.sort_order input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&sort_order="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}});b(document).on("click","#product-extra-wrapper td a.edit_desc_link",function(o){o.preventDefault();var n=b(this).parents("tr");var k=n.find("input:checkbox").val();var m=[];var g=n.find("textarea.descriptions");var f=0;for(var h in CKEDITOR.instances){CKEDITOR.instances[h].setData(b(g[f]).val());f++}b("#description-popup").data("row",n);b("#description-product-id").val(k);b("#description-popup").dialog("option","title",n.find(".product-name-wrapper").html()).dialog("open")});b(document).on("click",".product-extra-modal button.product-save",function(h){var f=b(this);h.preventDefault();var g=b("#editor iframe").contents().find("form");b.post(b(this).attr("data-url"),b("#editor iframe").contents().find("form").serialize(),function(i){if(i=="OK"){f.removeClass("btn-primary").addClass("btn-warning").prepend('<i class="fa fa-floppy-o"></i> ');if(f.attr("data-new")===false){reloadRow(formUrl)}else{ajaxified(b("#form-product-extra").attr("current"))}setTimeout(function(){f.removeClass("btn-warning").addClass("btn-primary");f.find("i").remove()},1500)}else{f.removeClass("btn-primary").addClass("btn-danger");setTimeout(function(){f.removeClass("btn-danger").addClass("btn-primary")},3500)}})});b(document).on("click","#product-extra-wrapper a.edit_link, #product-extra-wrapper a.default-product, #product-extra-wrapper a.insert-product",function(i){var f=false;if(getCookie("popup-edit")!=1){return true}var h=b(this).parents("tr");if(b(this).hasClass("insert-product")){f=true}i.preventDefault();formUrl=b(this).attr("href");formUrl=formUrl.replace("catalog/product","extension/product_extra");if(b("#editor").length>0){b("#editor").remove()}b("#content").prepend('<div id="editor" class="modal product-extra-modal" tabindex="-1" role="dialog" style="padding: 3px 0px 0px 0px;"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body" style="height: 600px;"><iframe src="'+b(this).attr("href")+'&iframed=1" style="padding:0; margin: 0; display: block; width: 100%; height: 100%;" frameborder="no" scrolling="auto"></iframe></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" class="btn btn-primary product-save" data-url="'+formUrl+'" data-new="'+f+'">Save changes</button></div></div>');if(getCookie("editorWidth")===null){setCookie("editorWidth",950)}if(getCookie("editorHeight")===null){setCookie("editorHeight",550)}b("#editor").modal({}).modal("show");var g=function(j){j=j.replace("update","ajaxify");b.get(j,function(k){h.html(k)})}});if(b("#form-product-extra").length>0){b(document).on("click","#modal-image a.thumbnail",function(f){b("#modal-image").data("trigger").next().trigger("change")})}b(document).on("click","#product-extra-wrapper a[data-toggle='main-image']",function(g){g.preventDefault();var f=b(this);b("#modal-image").remove();b.ajax({url:"index.php?route=common/filemanager",data:{user_token:token,target:b(this).next().attr("id"),thumb:b(this).attr("id")},dataType:"html",success:function(h){b("body").append('<div id="modal-image" class="modal">'+h+"</div>");b("#modal-image").modal("show");b("#modal-image").data("trigger",f)}})});b(document).on("change",'#product-extra-wrapper .image-wrapper input[name="image"]',function(f){var g=b(this).parents("td");g.addClass("updated");b.get(b(this).attr("rel"),{image:b(this).val(),product_id:b(this).attr("data-id")},function(){setTimeout(function(){g.removeClass("updated")},1500)})});b(document).on("click","#product-extra-wrapper .image-wrapper .remove",function(f){f.preventDefault();if(!confirm("Are you sure?")){return false}b(this).prev().prev().find("img").prop("src",b(this).prev().prev().find("img").attr("data-placeholder"));b(this).prev().val("");b(this).prev().trigger("change")});b(document).on("change","#product-extra-wrapper input.switcher",function(){if(b(this).is(":checked")===true){b("."+b(this).attr("name")).removeClass("hide-column");setCookie(b(this).attr("name"),1,365)}else{b("."+b(this).attr("name")).addClass("hide-column");deleteCookie(b(this).attr("name"))}});var e=function(){var f=[];b("#product-extra-wrapper input.switcher").each(function(){if(getCookie(b(this).attr("name"))==1){b(this).attr("checked",true)}else{b(this).attr("checked",false)}if(b(this).is(":checked")===true){b("."+b(this).attr("name")).removeClass("hide-column")}else{b("."+b(this).attr("name")).addClass("hide-column")}})};var c=function(){b("#product-extra-wrapper input.switcher").each(function(){setCookie(b(this).attr("name"),1,365)});setCookie("show-column-checkboxes",1,365);b("#product-extra-wrapper .column-switcher").removeClass("hide-column")};if(getCookie("show-column-checkboxes")>=1){e()}else{c()}if(getCookie("show-column-checkboxes")==1){b(".column-switcher").show()}else{b(".column-switcher").hide()}b(document).on("click","#product-extra-wrapper .columns-button",function(f){f.preventDefault();if(getCookie("show-column-checkboxes")==1){b(".column-switcher").hide();setCookie("show-column-checkboxes",2,365)}else{b(".column-switcher").show();setCookie("show-column-checkboxes",1,365)}});b(document).on("click","#product-extra-wrapper td.product-manufacturer",function(){if(b(this).find("select").length===0){var f=b('.filter select[name="filter_manufacturer"]').clone();b(this).attr("mname",b(this).html());b(this).html("");f.val(b(this).attr("rel"));b(this).append(f)}});b(document).on("change","#product-extra-wrapper td.product-manufacturer select",function(){var h=b(this).parents("td");var g=b(this).parents("tr").children("td");var f=b(g[0]).find("input").val();b.get(h.attr("loc")+"&manufacturer_id="+encodeURIComponent(b(this).val()),function(){h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.product-manufacturer select",function(){var h=b(this).parents("td");var f=b(this).find("option:selected").text();var g=b(this).find("option:selected").val();h.attr("rel",g);h.html(f)});b(document).on("click","#product-extra-wrapper td.weight-class",function(){if(b(this).find("select").length===0){var f=b('.filter select[name="filter_weight_class"]').clone();b(this).attr("mname",b(this).html());b(this).html("");f.val(b(this).attr("rel"));b(this).append(f)}});b(document).on("change","#product-extra-wrapper td.weight-class select",function(){var h=b(this).parents("td");var g=b(this).parents("tr").children("td");var f=b(g[0]).find("input").val();b.get(h.attr("loc")+"&weight_class_id="+encodeURIComponent(b(this).val()),function(){h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.weight-class select",function(){var h=b(this).parents("td");var f=b(this).find("option:selected").text();var g=b(this).find("option:selected").val();h.attr("rel",g);h.html(f)});b(document).on("click","#product-extra-wrapper td.tax-class",function(){if(b(this).find("select").length===0){var f=b('.filter select[name="filter_tax_class"]').clone();b(this).attr("mname",b(this).html());b(this).html("");f.val(b(this).attr("rel"));b(this).append(f)}});b(document).on("change","#product-extra-wrapper td.tax-class select",function(){var h=b(this).parents("td");var g=b(this).parents("tr").children("td");var f=b(g[0]).find("input").val();b.get(h.attr("loc")+"&tax_class_id="+encodeURIComponent(b(this).val()),function(){h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.tax-class select",function(){var h=b(this).parents("td");var f=b(this).find("option:selected").text();var g=b(this).find("option:selected").val();h.attr("rel",g);h.html(f)});b(document).on("click","#product-extra-wrapper td.stock-status",function(){if(b(this).find("select").length===0){var f=b('.filter select[name="filter_stock_status"]').clone();b(this).attr("mname",b(this).html());b(this).html("");f.val(b(this).attr("rel"));b(this).append(f)}});b(document).on("change","#product-extra-wrapper td.stock-status select",function(){var h=b(this).parents("td");var g=b(this).parents("tr").children("td");var f=b(g[0]).find("input").val();b.get(h.attr("loc")+"&stock_status_id="+encodeURIComponent(b(this).val()),function(){h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.stock-status select",function(){var h=b(this).parents("td");var f=b(this).find("option:selected").text();var g=b(this).find("option:selected").val();h.attr("rel",g);h.html(f)});b(document).on("click","#product-extra-wrapper td.length-class",function(){if(b(this).find("select").length===0){var f=b('.filter select[name="filter_length_class"]').clone();b(this).attr("mname",b(this).html());b(this).html("");f.val(b(this).attr("rel"));b(this).append(f)}});b(document).on("change","#product-extra-wrapper td.length-class select",function(){var h=b(this).parents("td");var g=b(this).parents("tr").children("td");var f=b(g[0]).find("input").val();b.get(h.attr("loc")+"&length_class_id="+encodeURIComponent(b(this).val()),function(){h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})});b(document).on("focusout","#product-extra-wrapper td.length-class select",function(){var h=b(this).parents("td");var f=b(this).find("option:selected").text();var g=b(this).find("option:selected").val();h.attr("rel",g);h.html(f)});b(document).on("click","#product-extra-wrapper ul.language-selection a",function(h){h.preventDefault();var g=b(this);var f=link+"&type=change_language&language="+b(this).attr("data-id")+"&ajaxed=1";ajaxified(f,function(){g.parents("ul").prev().find("#selected-language").text(g.attr("data-code"))})});b(document).on("click","#form-product-extra thead th a, #form-product-extra .pagination a",function(f){f.preventDefault();ajaxified(b(this).attr("href"))});b(document).on("submit","#form-product-extra",function(f){b.post(b(this).attr("action"),b(this).serialize(),function(g){ajaxified(b("#form-product-extra").attr("current"))});return false});b(document).on("change","#rows-per-page",function(f){ajaxified(b("#form-product-extra").attr("current")+"&rows="+b(this).val());return false});if(b("#product-extra-wrapper #form").length>0){if(typeof(b("#form"))!=="undefined"&&typeof(b("#form").attr("action"))!=="undefined"&&b("#form").attr("action").indexOf("product_id=-1")!=-1){b("#form").find('select[name="status"]').parents("tr").hide()}}b(document).on("click",".remove-category",function(g){g.preventDefault();var f=b(this);var h=f.parents("td");if(getCookie("remove-delete-confirmation")!=1){if(!confirm("Are you sure?")){return false}}b.get(b(this).attr("href"),function(i){f.parent().fadeOut(null,function(){f.parent().remove();h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})})});b(document).on("mouseover mouseout","li.cat-list",function(f){if(f.type=="mouseover"){b(this).find(".remove-category").show()}else{b(this).find(".remove-category").hide()}});b(document).on("click",".remove-filter",function(g){g.preventDefault();var f=b(this);var h=f.parents("td");if(getCookie("remove-delete-confirmation")!=1){if(!confirm("Are you sure?")){return false}}b.get(b(this).attr("href"),function(i){f.parent().fadeOut(null,function(){f.parent().remove();h.addClass("updated");setTimeout(function(){h.removeClass("updated")},1500)})})});b(document).on("mouseover mouseout","li.filter-list",function(f){if(f.type=="mouseover"){b(this).find(".remove-filter").show()}else{b(this).find(".remove-filter").hide()}});b(document).on("click","#product-extra-wrapper button.btn-ipe-action",function(f){f.preventDefault();if(b(this).hasClass("delete")&&confirm(confirmation)){b.post(b(this).attr("formaction"),b("#form-product-extra").serialize(),function(){ajaxified(b("#form-product-extra").attr("current"))})}if(b(this).hasClass("copy")){b.post(b(this).attr("formaction"),b("#form-product-extra").serialize(),function(){ajaxified(b("#form-product-extra").attr("current"))})}});b(document).on("click","#discount-special-window button.discount-save",function(g){var f=b(this);g.preventDefault();f.removeClass("btn-primary").addClass("btn-warning").prepend('<i class="fa fa-floppy-o"></i> ');b.post(b(this).attr("data-url"),b("#discount-special-window form").serialize(),function(h){ajaxified(b("#form-product-extra").attr("current"));setTimeout(function(){f.removeClass("btn-warning").addClass("btn-primary");f.find("i").remove()},1500)})});b(document).on("click","#product-extra-wrapper a.special_link, a.discount_link",function(i){i.preventDefault();var h=b(this);var j=b(this).parents("tr").find(".product-name").text();var g=b(this).parents("tr").find(".product-model").text();var k=b(this).attr("href")+"&popup=true&rand="+Math.floor(Math.random()*1100000);b("#popup-window").remove();var f=b('<div id="popup-window" class="hidden"></div>');f.appendTo("body");f.append('<div id="discount-special-window" class="modal" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body" style="height: 600px;"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" data-url="'+k+'" class="btn btn-primary discount-save">Save changes</button></div></div>');f.find(".modal-body").load(k,null,function(){b("#popup-window").removeClass("hidden");b("#discount-special-window").modal({}).modal("show")})});b(document).on("keydown","#product-extra-wrapper tr.filter input",function(f){if(f.keyCode==13){filter()}}).on("focusin","#product-extra-wrapper tr.filter input",function(f){b(this).data("orig",b(this).val())}).on("focusout","#product-extra-wrapper tr.filter input",function(f){if(b(this).val()!=b(this).data("orig")){filter()}});b(document).on("keydown","#product-extra-wrapper .product-row :input",function(f){if(f.keyCode==13){b(this).trigger("blur");b(this).focus();return false}});b(document).on("change","#product-extra-wrapper td.discount-column input.discount-price-field",function(j){var k=b(this).parents("td");var i=b(this).parents("tr").children("td");var f=b(this).parents("table").find('tr.filter select[name="customer_group_discount_price"]').val();var h=b(i[0]).find("input").val();var g=b(this);b.get(b(this).attr("rel")+"&customer_group_id="+f,{price:encodeURIComponent(b(this).val())},function(m){k.addClass("updated");g.val(m);k.parents("tr").find("td.acions .discount_link").addClass("has_discount");setTimeout(function(){k.removeClass("updated")},1500)})});b(document).on("change","#product-extra-wrapper td.special-column input.special-price-field",function(j){var k=b(this).parents("td");var i=b(this).parents("tr").children("td");var f=b(this).parents("table").find('tr.filter select[name="customer_group_special_price"]').val();var h=b(i[0]).find("input").val();var g=b(this);b.get(b(this).attr("rel")+"&customer_group_id="+f,{price:encodeURIComponent(b(this).val())},function(m){k.addClass("updated");g.val(m);k.parents("tr").find("td.acions .special_link").addClass("has_special");setTimeout(function(){k.removeClass("updated")},1500)})});b(document).on("change",'#product-extra-wrapper tr.filter :input[name="customer_group_discount_price"]',function(g){var f=b(this).parents("tr");f.find(".filter-button").trigger("click")});b(document).on("change",'#product-extra-wrapper tr.filter :input[name="customer_group_special_price"]',function(g){var f=b(this).parents("tr");f.find(".filter-button").trigger("click")});b(document).ready(function(){b(document).on("click","#product-extra-wrapper td.tags",function(){var f=b(this).find(".tags-wrapper");f.hide();f.next().show();f.next().focus()});b(document).on("focusout","td.tags input",function(){var f=b(this);if(f.prop("value")!=f.attr("orig")){b.get(f.attr("rel")+"&tags="+encodeURIComponent(f.val()),function(g){f.val(g);f.attr("orig",g);f.parents("td").addClass("updated");f.prev().html(g);f.prev().show();f.hide();setTimeout(function(){f.parents("td").removeClass("updated")},1500)})}else{f.hide();f.prev().show()}})})});var ajaxified=function(a,b){if(a){if(a.toString().indexOf("?")!=-1){a+="&ajaxed=1"}else{a+="?ajaxed=1"}$("#product-extra-table").addClass("processing");$.get(a,function(c){let html=$(c);content=html.find("#form-product-extra").children();$("#form-product-extra").html(content);$("#form-product-extra").trigger("product-extra-reload");if(typeof b=="function"){b()}$("#product-extra-table").removeClass("processing")});$("#form-product-extra").attr("current",a)}};